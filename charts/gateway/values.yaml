# Default values for gateway chart
# This chart deploys a shared Gateway resource for multi-tenant applications

# Base domain for the gateway
# Override this in deployment-specific values (e.g., stg.example.com)
domain: example.com

# GatewayClass configuration
# This creates the cluster-scoped GatewayClass resource
gatewayClass:
  # Enable GatewayClass creation
  enabled: true

  # GatewayClass name (must match gateway.gatewayClassName below)
  name: envoy-gateway

  # Controller name (must match Envoy Gateway installation)
  controllerName: gateway.envoyproxy.io/gatewayclass-controller

  # Optional: Parameters reference for advanced Envoy Gateway configuration
  # Enable this to use custom EnvoyProxy resources (e.g., for static IPs)
  parametersRef:
    enabled: false
    group: gateway.envoyproxy.io
    kind: EnvoyProxy
    name: custom-proxy-config
    namespace: envoy-gateway-system

# Gateway configuration
gateway:
  # Gateway name (referenced by HTTPRoutes)
  name: shared-gateway

  # Gateway namespace
  namespace: gateway-system

  # GatewayClass to use (must exist in cluster)
  gatewayClassName: envoy-gateway

  # Listeners configuration
  listeners:
    # HTTPS listener
    https:
      enabled: true
      port: 443
      protocol: HTTPS

    # HTTP listener (for redirect to HTTPS)
    http:
      enabled: true
      port: 80
      protocol: HTTP

# TLS/Certificate configuration
tls:
  # Enable TLS certificate management
  enabled: true

  # Secret name for TLS certificate
  secretName: gateway-tls

  # Cert-manager configuration
  certManager:
    # Enable cert-manager integration
    enabled: true

    # ClusterIssuer to use for certificate issuance
    clusterIssuer: letsencrypt-prod

    # Include apex domain in certificate
    includeApex: true

    # Specific subdomains for HTTP-01 challenge
    # Each generates: subdomain.domain.com
    subdomains:
      - app
      - api
    # For multiple environments/services:
    #   - cms
    #   - admin
    #   - stg.app
    #   - stg.api

# HTTP to HTTPS redirect
httpRedirect:
  # Enable automatic HTTP to HTTPS redirect
  enabled: true

  # HTTP status code for redirect (301 = permanent, 302 = temporary)
  statusCode: 301

# Labels to apply to all resources
labels: {}

# Annotations to apply to all resources
annotations: {}
